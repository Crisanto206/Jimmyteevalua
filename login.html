<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Login - AccessOne</title>
  <style>
    :root {
      --primary: #2E0060;
      --secondary: #FFD400;
      --accent: #00B2A9;
      --bg-light: #f4f6fa;
      --bg-white: #fff;
      --gray: #e0e3e8;
      --text: #22223b;
      --shadow: 0 8px 32px rgba(46,0,96,0.13);
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #f4f6fa 0%, #e0e3e8 100%);
      font-family: 'Montserrat', 'Segoe UI', Arial, sans-serif;
      color: var(--text);
      min-height: 100vh;
    }
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background-image: url('pattern.svg'), linear-gradient(135deg, #f4f6fa 0%, #e0e3e8 100%);
      background-repeat: repeat, no-repeat;
    }
    .login-card {
      background: var(--bg-white);
      border-radius: 28px;
      box-shadow: var(--shadow);
      padding: 48px 38px 38px 38px;
      min-width: 340px;
      max-width: 370px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      border: 1.5px solid var(--gray);
      animation: fadeIn 0.8s cubic-bezier(.4,1.4,.6,1);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(40px);}
      to { opacity: 1; transform: none;}
    }
    .logo-accessone {
      width: 90px;
      height: 90px;
      object-fit: contain;
      margin-bottom: 16px;
      border-radius: 50%;
      border: 3px solid var(--secondary);
      background: #fff;
      box-shadow: 0 2px 16px rgba(46,0,96,0.08);
      transition: box-shadow 0.2s;
    }
    .login-title {
      font-size: 2.1em;
      font-weight: 800;
      color: var(--primary);
      margin: 0 0 8px 0;
      letter-spacing: 1.2px;
      text-align: center;
      text-shadow: 0 2px 12px rgba(46,0,96,0.08);
    }
    .subtitle {
      color: var(--accent);
      font-size: 1.1em;
      margin-bottom: 24px;
      text-align: center;
      letter-spacing: 0.5px;
      font-weight: 500;
    }
    label {
      display: block;
      margin-top: 18px;
      font-weight: 700;
      color: var(--primary);
      letter-spacing: 0.5px;
      font-size: 1.05em;
    }
    input[type="email"], input[type="password"] {
      width: 100%;
      padding: 13px 14px;
      margin-top: 7px;
      border: 1.5px solid var(--primary);
      border-radius: 8px;
      font-size: 1.08em;
      background: #f9f9fb;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: 0 1px 6px rgba(46,0,96,0.06);
      outline: none;
    }
    input[type="email"]:focus, input[type="password"]:focus {
      border-color: var(--accent);
      box-shadow: 0 2px 12px rgba(0,178,169,0.10);
    }
    button {
      margin-top: 32px;
      width: 100%;
      padding: 13px 0;
      background: linear-gradient(90deg, var(--primary) 60%, var(--accent) 100%);
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 800;
      font-size: 1.15em;
      letter-spacing: 1px;
      box-shadow: 0 2px 12px rgba(46,0,96,0.10);
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
      outline: none;
    }
    button:hover, button:focus {
      background: linear-gradient(90deg, #FFD400 60%, #00B2A9 100%);
      color: var(--primary);
      box-shadow: 0 4px 24px rgba(0,178,169,0.13);
      transform: translateY(-2px) scale(1.03);
    }
    #errorMsg {
      margin-top: 18px;
      color: #ff4d4d;
      font-size: 1em;
      display: none;
      text-align: center;
      font-weight: 600;
      letter-spacing: 0.5px;
      min-height: 24px;
    }
    .footer-accessone {
      margin-top: 32px;
      text-align: center;
      font-size: 0.98em;
      color: #888;
      letter-spacing: 0.5px;
    }
    .footer-accessone span {
      color: var(--primary);
      font-weight: 700;
    }
    @media (max-width: 500px) {
      .login-card {
        padding: 24px 6vw 24px 6vw;
        min-width: 0;
        max-width: 98vw;
      }
      .logo-accessone {
        width: 64px;
        height: 64px;
      }
      .login-title { font-size: 1.3em; }
      .subtitle { font-size: 1em; }
      button { font-size: 1em; padding: 11px 0; }
    }
  </style>
</head>
<body>
  <div class="login-card">
    <img src="logo.jpg" alt="AccessOne Logo" class="logo-accessone" id="logo-accessone"/>
    <div class="login-title">AccessOne</div>
    <div class="subtitle">Acceso seguro a tu plataforma</div>
    <label for="email">Correo electrónico</label>
    <input id="email" type="email" placeholder="usuario@dominio.com" autocomplete="username"/>
    <label for="password">Contraseña</label>
    <input id="password" type="password" placeholder="********" autocomplete="current-password"/>
    <button id="btn">Ingresar</button>
    <button id="btn-admin" type="button" style="margin-top:14px;background:linear-gradient(90deg,#FFD400 60%,#2E0060 100%);color:#2E0060;font-weight:800;">Login como Admin</button>
    <div id="errorMsg"></div>
    <div class="footer-accessone">
      &copy; <span>Accessone</span> 2025. Todos los derechos reservados.
    </div>
  </div>
  <!-- Sonidos -->
  <audio id="keySound" src="key.mp3" preload="auto"></audio>
  <audio id="okSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b9b7bfa.mp3" preload="auto"></audio>
  <script type="module">
    import { auth } from "./js/firebase-config.js";
    import { signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

    // Redirección por click en logo según usuario
    document.getElementById("logo-accessone").onclick = () => {
      const email = document.getElementById("email").value.trim().toLowerCase();
      if (
        email === "csalcala@accessone.com.mx" ||
        email === "valonzo@accessone.com.mx" ||
        email === "jfernandez@accessone.com.mx"
      ) {
        window.location.href = "login-admin.html";
      } else {
        window.location.href = "index.html";
      }
    };

    const btn = document.getElementById("btn");
    const err = document.getElementById("errorMsg");
    const keySound = document.getElementById("keySound");
    const okSound = document.getElementById("okSound");

    // Sonido por tecla presionada en los campos de login
    ["email", "password"].forEach(id => {
      document.getElementById(id).addEventListener("keydown", e => {
        // Solo reproducir para teclas de entrada (no Shift, Tab, etc)
        if (e.key.length === 1 || e.key === "Backspace" || e.key === "Delete") {
          keySound.currentTime = 0;
          keySound.play();
        }
      });
    });

    btn.addEventListener("click", async () => {
      err.style.display = "none";
      const email = document.getElementById("email").value.trim();
      const pass  = document.getElementById("password").value;
      if(!email||!pass){
        err.textContent = "Completa ambos campos.";
        err.style.display = "block";
        return;
      }
      try {
        await signInWithEmailAndPassword(auth, email, pass);
        okSound.currentTime = 0;
        okSound.play();
        setTimeout(() => {
          window.location.href = "index.html";
        }, 350); // deja sonar el sonido satisfactorio
      } catch(e) {
        err.textContent = e.code==="auth/wrong-password"
          ? "Contraseña incorrecta."
          : e.code==="auth/user-not-found"
            ? "Usuario no registrado."
            : "Error: " + (e.message || "No se pudo iniciar sesión.");
        err.style.display = "block";
      }
    });

    // Botón login como admin
    document.getElementById("btn-admin").onclick = () => {
      window.location.href = "login-admin.html";
    };

    // Permite login con Enter
    document.addEventListener("keydown", e => {
      if(e.key === "Enter") btn.click();
    });
  </script>
</body>
</html>

