<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dashboard de KPIs</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary: #2E0060;
      --secondary: #FFD400;
      --accent: #00B2A9;
      --bg-light: #f4f6fa;
      --bg-white: #fff;
      --gray: #e0e3e8;
      --text: #22223b;
      --shadow: 0 4px 24px rgba(46,0,96,0.08);
    }

    /* Reusing checklist styles */
    body {
      background: linear-gradient(135deg, #f4f6fa 0%, #e0e3e8 100%);
      font-family: 'Montserrat', 'Segoe UI', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
    }

    header {
      background: linear-gradient(90deg, #2E0060 60%, #00B2A9 100%);
      color: #fff;
      padding: 32px 48px;
      border-bottom: 8px solid var(--secondary);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .filters {
      background: var(--bg-white);
      padding: 1.5rem;
      border-radius: 16px;
      box-shadow: var(--shadow);
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .filters select, 
    .filters input,
    .filters button {
      padding: 0.75rem 1rem;
      border: 2px solid var(--gray);
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .filters button {
      background: var(--primary);
      color: white;
      border: none;
      cursor: pointer;
      font-weight: 600;
    }

    .filters button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(46,0,96,0.15);
    }

    .view-toggle {
      display: flex;
      gap: 1rem;
      margin-left: auto;
    }

    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
      animation: fadeIn 0.5s ease;
    }

    .project-card {
      background: var(--bg-white);
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
    }

    .project-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px rgba(46,0,96,0.15);
    }

    .project-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .project-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--primary);
    }

    .project-score {
      font-size: 2rem;
      font-weight: 800;
      color: var(--accent);
    }

    .chart-container {
      position: relative;
      padding: 1.5rem;
      border-radius: 16px;
      background: var(--bg-white);
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
    }

    .chart-container:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(46,0,96,0.12);
    }

    .chart-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--primary);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .chart-grid {
        grid-template-columns: 1fr;
      }
      
      .filters {
        flex-direction: column;
      }
      
      .view-toggle {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Dashboard de KPIs</h1>
  </header>

  <div class="container">
    <!-- Filtros de mes -->
    <div class="filters" style="margin-bottom: 1.5rem;">
      <label for="filtro-mes" style="font-weight:700;color:var(--primary);">Mes:</label>
      <select id="filtro-mes">
        <option value="todos">Todos</option>
        <option value="01">Enero</option>
        <option value="02">Febrero</option>
        <option value="03">Marzo</option>
        <option value="04">Abril</option>
        <option value="05">Mayo</option>
        <option value="06">Junio</option>
        <option value="07">Julio</option>
        <option value="08">Agosto</option>
        <option value="09">Septiembre</option>
        <option value="10">Octubre</option>
        <option value="11">Noviembre</option>
        <option value="12">Diciembre</option>
      </select>
  <button onclick="debugDashboard()" style="margin-left: 10px; padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 4px;">üêõ Debug</button>

  <!-- Project selector and date range for dashboard -->
  <!-- Project selector removed per request; dates kept for filtering if needed -->
  <label for="startDate" style="margin-left:12px; font-weight:700;color:var(--primary);">Desde:</label>
  <input type="date" id="startDate" style="margin-left:6px;">
  <label for="endDate" style="margin-left:8px; font-weight:700;color:var(--primary);">Hasta:</label>
  <input type="date" id="endDate" style="margin-left:6px;">
    </div>
    <!-- Oculta el singleProjectView por defecto y muestra allProjectsView -->
    <div id="singleProjectView" style="display:none;">
      <div class="gauge-container">
        <canvas id="gaugeChart"></canvas>
        <img id="mascotaStatus" src="mascota_amarillo.png" class="mascota">
      </div>

      <div class="chart-grid">
        <div class="chart-container">
          <canvas id="rotacionChart"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="quejasTendencia"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="cumplimientoTrend"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="incidenciasChart"></canvas>
        </div>
      </div>
    </div>

    <div id="allProjectsView" class="projects-grid" style="display: grid">
      <!-- Se llenar√° din√°micamente -->
    </div>
  </div>
  <div id="modal-calificaciones" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000;align-items:center;justify-content:center;background:rgba(0,0,0,0.18);">
    <div style="background:#fff;border-radius:18px;max-width:420px;width:95vw;padding:28px 18px;box-shadow:0 8px 32px #FFD40033;position:relative;">
      <button onclick="document.getElementById('modal-calificaciones').style.display='none'" style="position:absolute;top:12px;right:12px;background:#FFD400;color:#2E0060;border:none;border-radius:50%;width:32px;height:32px;font-size:1.3em;font-weight:900;cursor:pointer;">&times;</button>
      <h3 id="modal-proyecto-titulo" style="color:#2E0060;text-align:center;margin-top:0;margin-bottom:18px;"></h3>
      <div id="modal-calificaciones-list"></div>
    </div>
  </div>
  <script type="module">
    import { auth, db } from "./js/firebase-config.js";
    import { collection, query, where, getDocs, orderBy, Timestamp, doc, getDoc, setDoc } 
      from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
    import { onAuthStateChanged, signOut }
      from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

    // Lista completa de proyectos (se cargar√° din√°micamente)
    let ALL_PROJECTS = [];
    
    // Correspondencia proyecto checklist -> proyecto SAI (se cargar√° din√°micamente)
    let projectSaiMap = {};

    let charts = {};
    let currentUser = null;
    let userProjects = [];

    // Cargar proyectos din√°micamente desde la base de datos
    async function loadProjectsFromDatabase() {
      try {
        console.log('üìä Dashboard: Cargando proyectos directamente desde project_scores...');
        
        let proyectos = {};
        
        // Leer directamente los documentos de project_scores
        const collectionRef = collection(db, "project_scores");
        const querySnapshot = await getDocs(collectionRef);
        
        console.log('üìä Dashboard: Documentos encontrados en project_scores:', querySnapshot.size);
        
        querySnapshot.forEach((docSnap) => {
          const docId = docSnap.id;
          // Excluir documentos de metadata
          if (docId !== 'proyectos_mapping' && docSnap.data().scores) {
            // Usar el nombre del documento como clave y valor
            proyectos[docId] = docId;
            console.log(`üìä Dashboard: Proyecto encontrado: ${docId}`);
          }
        });
        
        console.log('üìä Dashboard: Proyectos extra√≠dos:', Object.keys(proyectos));
        
        // Convertir a arrays
        ALL_PROJECTS = Object.keys(proyectos).sort();
        projectSaiMap = proyectos;
        
        console.log('üéØ Dashboard: ALL_PROJECTS final:', ALL_PROJECTS);
        console.log('üó∫Ô∏è Dashboard: projectSaiMap final:', projectSaiMap);
        
      } catch (error) {
        console.error('üí• Dashboard: Error al cargar proyectos:', error);
        // Fallback b√°sico
        ALL_PROJECTS = ["A5 TLAXCALA", "Adagio", "Boulevard 5 de mayo"];
        projectSaiMap = {};
      }
    }

    // Nueva funci√≥n de inicializaci√≥n
    function initDashboard() {
      initCharts();
      // project selector removed
      setDefaultDates();
    }

    // Initialize charts
    function initCharts() {
      // Gauge chart
      charts.gauge = new Chart(document.getElementById('gaugeChart'), {
        type: 'doughnut',
        data: {
          datasets: [{
            data: [0, 100],
            backgroundColor: ['#2E0060', '#e0e3e8']
          }]
        },
        options: {
          circumference: 180,
          rotation: -90,
          cutout: '80%',
          plugins: {
            tooltip: { enabled: false },
            legend: { display: false }
          }
        }
      });

      // Line charts
      const commonOptions = {
        responsive: true,
        plugins: {
          legend: { position: 'top' }
        },
        scales: {
          y: { beginAtZero: true }
        }
      };

      charts.rotacion = new Chart(document.getElementById('rotacionChart'), {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label: 'Tasa de Rotaci√≥n',
            data: [],
            borderColor: '#2E0060'
          }]
        },
        options: commonOptions
      });

      charts.quejas = new Chart(document.getElementById('quejasTendencia'), {
        type: 'bar',
        data: {
          labels: [],
          datasets: [{
            label: 'Quejas por Mes',
            data: [],
            backgroundColor: '#00B2A9'
          }]
        },
        options: commonOptions
      });

      charts.cumplimiento = new Chart(document.getElementById('cumplimientoTrend'), {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label: 'Tasa de Cumplimiento',
            data: [],
            borderColor: '#FFD400'
          }]
        },
        options: commonOptions
      });

      charts.incidencias = new Chart(document.getElementById('incidenciasChart'), {
        type: 'bar',
        data: {
          labels: [],
          datasets: [{
            label: 'Incidencias Cr√≠ticas',
            data: [],
            backgroundColor: '#ff4d4d'
          }]
        },
        options: commonOptions
      });
    }

    // Load data from Firestore
    async function loadData() {
      console.log("üìä Dashboard: loadData iniciado");
      // project selector removed: pick first available project
      const projectId = (userProjects && userProjects.length>0) ? userProjects[0] : ((ALL_PROJECTS && ALL_PROJECTS.length>0) ? ALL_PROJECTS[0] : null);
      if (!projectId) {
        alert("No hay proyectos disponibles");
        return;
      }

      try {
        const startDate = document.getElementById('startDate').value;
        const endDate = document.getElementById('endDate').value;

        // Usar el nombre SAI para buscar en Firebase (EXACTAMENTE igual que en checklist)
        const projectSaiName = projectSaiMap[projectId] || projectId;
        console.log(`üìä Dashboard: Cargando datos para: ${projectId} -> SAI: ${projectSaiName}`);

        // Usar la misma l√≥gica que checklist.html loadLastScores()
        const ref = doc(db, "project_scores", projectSaiName);
        console.log(`üìä Dashboard: Consultando Firebase: project_scores/${projectSaiName}`);
        
        const snap = await getDoc(ref);
        console.log(`üìÑ Dashboard: Documento existe:`, snap.exists());
        
        if (!snap.exists()) {
          console.log(`‚ùå Dashboard: Documento no existe para ${projectSaiName}`);
          alert(`No hay registros previos para ${projectId} (${projectSaiName})`);
          return;
        }
        
        const data = snap.data();
        console.log(`üìã Dashboard: Datos del documento:`, data);
        
        if (!data.scores || !Array.isArray(data.scores)) {
          console.log(`‚ùå Dashboard: No hay array de scores en el documento`);
          alert(`No hay scores guardados para ${projectId} (${projectSaiName})`);
          return;
        }
        
        // Obtener las √∫ltimas 12 calificaciones (igual que checklist)
        const allScores = data.scores; // Ya est√°n ordenadas con la m√°s reciente primero
        console.log(`‚úÖ Dashboard: Encontrados ${allScores.length} registros para ${projectSaiName}`);
        
        // Filtrar por fechas si se especificaron
        let filteredScores = allScores;
        if (startDate && endDate) {
          filteredScores = allScores.filter(score => 
            score.date >= startDate && 
            score.date <= endDate
          );
          console.log(`üìä Dashboard: ${filteredScores.length} registros en el per√≠odo ${startDate} - ${endDate}`);
        } else {
          // Si no hay filtro de fechas, tomar las √∫ltimas 12 (igual que checklist)
          filteredScores = allScores.slice(0, 12);
          console.log(`üìä Dashboard: Mostrando √∫ltimas ${filteredScores.length} calificaciones`);
        }

        if (filteredScores.length === 0) {
          alert(`No hay datos para el per√≠odo seleccionado`);
          return;
        }

        console.log("üìä Dashboard: Datos encontrados:", filteredScores);
        updateCharts(filteredScores);

      } catch (error) {
        console.error("üí• Dashboard: Error al cargar datos:", error);
        alert("Error al cargar datos: " + error.message);
      }
    }

    // Actualizar funci√≥n updateCharts para manejar posibles datos faltantes
    function updateCharts(data) {
      // Calculate averages safely
      const avgCumplimiento = data.reduce((sum, d) => {
        const value = d.metrics?.tasaCumplimiento || 0;
        return sum + parseFloat(value);
      }, 0) / data.length;

      // Update gauge and mascota
      charts.gauge.data.datasets[0].data = [avgCumplimiento, 100 - avgCumplimiento];
      charts.gauge.update();

      // Update mascota image based on compliance
      const mascotaImg = document.getElementById('mascotaStatus');
      if (avgCumplimiento <= 40) {
        mascotaImg.src = "mascota_rojo.png";
      } else if (avgCumplimiento <= 75) {
        mascotaImg.src = "mascota_amarillo.png";
      } else {
        mascotaImg.src = "mascota_verde.png";
      }

      // Prepare data for trend charts safely
      const labels = data.map(d => d.date);
      
      charts.rotacion.data.labels = labels;
      charts.rotacion.data.datasets[0].data = data.map(d => parseFloat(d.staff?.rotacion || 0));
      charts.rotacion.update();

      charts.quejas.data.labels = labels;
      charts.quejas.data.datasets[0].data = data.map(d => parseInt(d.metrics?.quejas || 0));
      charts.quejas.update();

      charts.cumplimiento.data.labels = labels;
      charts.cumplimiento.data.datasets[0].data = data.map(d => parseFloat(d.metrics?.tasaCumplimiento || 0));
      charts.cumplimiento.update();

      charts.incidencias.data.labels = labels;
      charts.incidencias.data.datasets[0].data = data.map(d => parseInt(d.metrics?.incidenciasCriticas || 0));
      charts.incidencias.update();
    }

  // Project selector removed: UI-driven project selection was removed per request

    // Funci√≥n para establecer fechas por defecto
    function setDefaultDates() {
      const end = new Date();
      const start = new Date();
      start.setDate(start.getDate() - 30);
      
      document.getElementById('startDate').value = start.toISOString().slice(0,10);
      document.getElementById('endDate').value = end.toISOString().slice(0,10);
    }

    // Initialize on load
    window.addEventListener('DOMContentLoaded', async () => {
      console.log('üöÄ Dashboard: Iniciando aplicaci√≥n...');
      
      // Primero inicializar charts y fechas
      initCharts();
      setDefaultDates();
      
      // Verificar autenticaci√≥n PRIMERO (igual que checklist.html)
      const unsubscribe = onAuthStateChanged(auth, async (user) => {
        console.log('üë§ Dashboard: onAuthStateChanged triggered, user:', user?.email || 'No user');
        
        if (!user) {
          console.log('‚ùå Dashboard: No hay usuario autenticado, redirigiendo...');
          window.location.href = "login.html";
          return;
        }
        
        currentUser = user;
        console.log('ÔøΩ Dashboard: Usuario autenticado:', user.email);
        
        // Cargar proyectos DESPU√âS de autenticaci√≥n (igual que checklist.html)
        console.log('üöÄ Dashboard: Iniciando carga de proyectos...');
        await loadProjectsFromDatabase();
        console.log('ÔøΩ Dashboard: Proyectos cargados, total ALL_PROJECTS:', ALL_PROJECTS.length);
        
        // Obtener proyectos asignados del usuario DESPU√âS de cargar ALL_PROJECTS
        let userDoc = await getDoc(doc(db, "users", user.uid));
        if (userDoc.exists()) {
          const data = userDoc.data();
          console.log('üìã Dashboard: Datos del usuario:', data);
          
          if (data.isAdmin || data.admin) {
            userProjects = [...ALL_PROJECTS]; // Copiar array
            console.log('üëë Dashboard: Usuario admin, acceso a todos los proyectos:', userProjects.length);
          } else if (Array.isArray(data.assignedProjects)) {
            userProjects = data.assignedProjects;
            console.log('ÔøΩ Dashboard: Proyectos asignados:', userProjects);
          } else {
            userProjects = [];
            console.log('‚ùå Dashboard: No hay proyectos asignados');
          }
        } else {
          userProjects = [];
          console.log('‚ùå Dashboard: Documento de usuario no existe');
        }
        
        console.log('üéØ Dashboard: userProjects final:', userProjects);
        
  // Project selector removed; dashboard will use the first available project by default
        
        // Mostrar todos los proyectos autom√°ticamente
        showAllProjects();
        
        // Desuscribirse despu√©s de la primera ejecuci√≥n
        unsubscribe();
      });
    });

    // A√±adir nueva funci√≥n para mostrar todos los proyectos
    const filtroMes = document.getElementById('filtro-mes');
    filtroMes.addEventListener('change', () => showAllProjects());

    async function showAllProjects() {
      console.log('üöÄ Dashboard: showAllProjects iniciado');
      console.log('üìã Dashboard: userProjects disponibles:', userProjects);
      console.log('üó∫Ô∏è Dashboard: projectSaiMap disponible:', Object.keys(projectSaiMap).length, 'entradas');
      
      const container = document.getElementById('allProjectsView');
      const singleView = document.getElementById('singleProjectView');
      container.style.display = 'grid';
      singleView.style.display = 'none';
      container.innerHTML = '<div class="loading">Cargando proyectos...</div>';

      if (!userProjects || userProjects.length === 0) {
        console.log('‚ùå Dashboard: No hay userProjects disponibles');
        container.innerHTML = '<div class="no-data">No hay proyectos disponibles. Verifica la configuraci√≥n.</div>';
        return;
      }

      const mesSel = filtroMes.value;
      try {
        const projects = await Promise.all(
          (userProjects.length ? userProjects : []).map(async (projectId) => {
            // Usar el nombre SAI para buscar en Firebase (EXACTAMENTE igual que checklist)
            const projectSaiName = projectSaiMap[projectId] || projectId;
            console.log(`üìä Dashboard (showAll): Buscando ${projectId} -> SAI: ${projectSaiName}`);
            
            // Usar la misma l√≥gica que checklist.html loadLastScores()
            const ref = doc(db, "project_scores", projectSaiName);
            const snap = await getDoc(ref);
            
            if (!snap.exists()) {
              console.log(`‚ùå Dashboard: No existe documento para ${projectSaiName}`);
              return null;
            }
            
            const data = snap.data();
            if (!data.scores || !Array.isArray(data.scores) || data.scores.length === 0) {
              console.log(`‚ùå Dashboard: No hay scores para ${projectSaiName}`);
              return null;
            }
            
            // Obtener las √∫ltimas 12 calificaciones (igual que checklist)
            let scores = data.scores; // Ya est√°n ordenadas con la m√°s reciente primero
            console.log(`‚úÖ Dashboard: Encontrados ${scores.length} registros para ${projectSaiName}`);
            
            // Filtrar por mes si aplica
            if (mesSel !== "todos") {
              scores = scores.filter(s => {
                // s.date formato YYYY-MM-DD
                return (s.date || "").slice(5,7) === mesSel;
              });
            }
            
            if (scores.length === 0) {
              console.log(`‚ùå Dashboard: No hay datos para el mes ${mesSel}`);
              return null;
            }
            
            const lastScore = scores[0]; // La m√°s reciente
            const lastUser = lastScore.user || lastScore.usuario || "N/A";
            
            return {
              id: projectId, // Mantener el nombre del checklist para mostrar
              saiName: projectSaiName, // Agregar el nombre SAI para referencia
              lastScore,
              lastUser,
              allScores: scores.slice(0, 12) // M√°ximo 12 como en checklist
            };
          })
        );

        container.innerHTML = projects
          .filter(p => p !== null)
          .map(project => `
            <div class="project-card" style="cursor:pointer;" onclick="window.showCalificacionesModal('${project.id}')">
              <div class="project-header">
                <h3 class="project-title">${project.id}</h3>
                <span class="project-score">${project.lastScore.total?.toFixed(1) ?? "0.0"}%</span>
              </div>
              <div class="project-metrics">
                <div class="metric">
                  <span class="label">Rotaci√≥n</span>
                  <span class="value">${project.lastScore.staff?.rotacion || 0}%</span>
                </div>
                <div class="metric">
                  <span class="label">Quejas</span>
                  <span class="value">${project.lastScore.metrics?.quejas || 0}</span>
                </div>
                <div class="metric">
                  <span class="label">√öltima revisi√≥n</span>
                  <span class="value">${new Date(project.lastScore.date).toLocaleDateString()}</span>
                </div>
                <div class="metric">
                  <span class="label">√öltimo usuario</span>
                  <span class="value">${project.lastUser}</span>
                </div>
              </div>
            </div>
          `).join('');
        // Guardar datos para el modal
        window._allProjectsData = projects.filter(p => p !== null);
      } catch (err) {
        console.error("Error loading all projects:", err);
        container.innerHTML = '<div class="error">Error al cargar los proyectos</div>';
      }
    }

    // Modal de √∫ltimas calificaciones
    window.showCalificacionesModal = function(projectId) {
      const modal = document.getElementById('modal-calificaciones');
      const titulo = document.getElementById('modal-proyecto-titulo');
      const list = document.getElementById('modal-calificaciones-list');
      const project = (window._allProjectsData || []).find(p => p.id === projectId);
      if (!project) return;
      titulo.textContent = project.id + " - √öltimas calificaciones";
      list.innerHTML = project.allScores.slice(0, 5).map(s => `
        <div style="margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #e0e3e8;">
          <b>Fecha:</b> ${new Date(s.date).toLocaleDateString()}<br>
          <b>Calificaci√≥n:</b> ${s.total?.toFixed(1) ?? "0.0"}%<br>
          <b>Usuario:</b> ${s.usuario || s.user || "N/A"}
        </div>
      `).join('');
      modal.style.display = "flex";
    };
    
    // Funci√≥n de debugging
    window.debugDashboard = function() {
      console.log('üêõ === DEBUG DASHBOARD ===');
      console.log('üë§ currentUser:', currentUser?.email || 'No autenticado');
      console.log('üìã userProjects:', userProjects);
      console.log('üìä ALL_PROJECTS:', ALL_PROJECTS);
      console.log('üó∫Ô∏è projectSaiMap keys:', Object.keys(projectSaiMap));
      console.log('üó∫Ô∏è projectSaiMap:', projectSaiMap);
      
  // Verificar elementos DOM
  const container = document.getElementById('allProjectsView');
  console.log('üéØ allProjectsView exists:', !!container);
      
      alert('Debug info enviado a la consola. Abre DevTools (F12) para ver los detalles.');
    };
    
    // Make functions globally available
    window.showAllProjects = showAllProjects;
  // project selection UI and helper removed per request
  </script>
</body>
<script src="./js/logo-fix.js"></script>
</html>
